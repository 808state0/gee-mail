<!DOCTYPE html>
<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen"> <link href="https://fonts.googleapis.com/css?family=Luckiest+Guy" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Alex+Brush" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Just+Another+Hand" rel="stylesheet">

    <script>
      window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser


//toggle emails

var parentEmail= document.getElementsByClassName("Email")[0];
var parentInbox= document.getElementsByClassName("Inbox")[0];

//message counter

var messageCount=0;
	var inboxCounter = document.createElement("inbox");
			parentInbox.appendChild(inboxCounter);



//generating the first inital emails
	
for (var i = 0; i<window.geemails.length; i++){
		

		messageCount +=1;

		var subject = document.createElement("div");
				subject.className = "emailSubject";
				subject.innerHTML = "SUBJECT:" + " " + geemails[i].subject;
				parentEmail.appendChild(subject);
				

		var sender = document.createElement("div");
				sender.className = "emailSender";
				sender.innerHTML = "SENDER:" + " " + geemails[i].sender;
				parentEmail.appendChild(sender);
				

		var date = document.createElement("div");
				date.className ="emailDate";
				date.innerHTML = "DATE:" + " " + geemails[i].date;
				parentEmail.appendChild(date);
	

		var body = document.createElement("p");
				body.className = " bodyEmail";
				body.innerHTML = "BODY:" + " " + geemails[i].body;
				sender.appendChild(body);
		

		var divider = document.createElement("img");
                divider.className = "divider";
                divider.src = "https://mpnforum.files.wordpress.com/2012/03/divider-horizon-line.jpg";
                parentEmail.appendChild(divider); 

               inboxCounter.innerHTML = ": " + messageCount ;

// onclick toggle for emails

var clickMe = document.getElementsByClassName("emailSender");
for(var j = 0; j<clickMe.length; j++){
	clickMe[j].addEventListener("click", showMess);

}


function showMess(){
	var showBody = this.querySelectorAll(".bodyEmail")[0];
	if(showBody.style.display === "none"){
		showBody.style.display = "block";
	}else{
		showBody.style.display = "none";
	
	}
}
	

}
// intervals for next message        

       setInterval(LoadMoreMessages, 10000);


		
// Loading the new messages

function LoadMoreMessages(){
		messageCount +=1;

	var newMail = getNewMessage();
					

    	var subject = document.createElement("div");
                subject.className = "emailSubject";
               	subject.innerHTML = "SUBJECT:" + " " + newMail.subject;
               	parentEmail.appendChild(subject);
               			
        var sender = document.createElement("div");
           		sender.className = "emailSender";
                sender.innerHTML = "SENDER:" + " " + newMail.sender;
                parentEmail.appendChild(sender);
               	
        var date = document.createElement("div");
           		date.className = "emailDate";
                date.innerHTML = "DATE:" + " " + newMail.date;
                parentEmail.appendChild(date);
	
		var body= document.createElement("p");
        		body.className ="bodyEmail";
        		body.innerHTML = "BODY:" + " " + newMail.body;
				sender.appendChild(body);
					
		var divider = document.createElement("img");
                divider.className = "divider";
                divider.src = "https://mpnforum.files.wordpress.com/2012/03/divider-horizon-line.jpg";
                parentEmail.appendChild(divider); 
				

// onclick toggle for the repeating emails
				

var clickMe2 = document.getElementsByClassName("emailSender");
	for(var i = 0; i<clickMe2.length; i++){
		clickMe2[i].addEventListener("click", shownewMess);
}

function shownewMess(){
	var showsecondBody = this.querySelectorAll(".bodyEmail")[0];
	if(showsecondBody.style.display === "none"){
		showsecondBody.style.display	= "block";
	}else{
		showsecondBody.style.display = "none";
	}
}

				inboxCounter.innerHTML = ": " + messageCount ;
	}
};
 </script>
	</head>
	<body>
			<div>
			<header>
				<div>
				<h1 id="title"> Gee-mail challenge </b> 
				</h1> 
				<iframe id=giphy src="https://media1.giphy.com/media/l0HecyNuR4Usgk1cQ/giphy.gif" frameborder="0"></iframe> 
				<p class="name">by Kaleo Anguay</p>	
				</header>

			</div>			
			<div id ="nav">
				<h1>Navigation</h1>

				<ul>	
					<nav>
					<li>Inbox</li>
					<li>Important</li>
					<li>Starred</li>
					<li>Sent Mail</li>
					<li>Drafts</li>
					<li>More  &#x2193</li>
					</nav>	
						</ul>	
				</div>
				<hr>
				<div>
				<span>
						<h1 class="Inbox"> NEW MAIL</h1> <iframe src="https://media2.giphy.com/media/qfR7ATmV8yry8/giphy.gif" frameborder="0" id="giphy2"></iframe>
						 <hr>
						</span>
						</div>
		<div class ="Email">
					
						</div>
					 </span>

					 <div> <iframe src="https://media3.giphy.com/media/vCKC987OpQAco/giphy.gif" frameborder="0" id="giphy3"></iframe></div>

				</body>
</html>